groups:

  - name: "fetch"
    description: "Configure the fetch location"

  - name: "template"
    description: "Configure the ytt template"

portals:

  web_portal:
    protocols:
      - "https"
    host:
      - "www.carvel.dev"
    ports:
      - "443"
    path: ""

questions:

  - variable: git
    label: "Fetch using git"
    description: "kapp-controller fetch configuration using git"
    group: "fetch"
    schema:
      type: dict
      required: true
      attrs:

        - variable: enabled
          label: "Enable fetch using git"
          schema:
            type: boolean
            default: false
            show_subquestions_if: true
            subquestions:
              - variable: repo
                label: "git repository location"
                schema:
                  default: "https://github.com/salt-labs/tanzu"
                  hidden: false
                  required: true
                  type: string
              - variable: branch
                label: "git branch"
                schema:
                  default: "origin/master"
                  hidden: false
                  required: true
                  type: string
              - variable: path
                label: "folder path"
                schema:
                  editable: true
                  hidden: false
                  required: true
                  type: string
              - variable: secretRef
                label: "Secret reference"
                schema:
                  type: dict
                  required: false
                  attrs:
                    - variable: name
                      label: "Secret name"
                      schema:
                        default: gitops
                        editable: true
                        hidden: false
                        type: string
                    - variable: namespace
                      label: "Secret namespace"
                      schema:
                        default: gitops
                        editable: true
                        hidden: false
                        type: string
              - variable: secrets
                label: "git secrets"
                schema:
                  type: dict
                  required: false
                  attrs:
                    - variable: http
                      label: "git using HTTPS with PAT"
                      schema:
                        type: dict
                        required: false
                        attrs:
                          - variable: username
                            label: "username"
                            schema:
                              default: ""
                              editable: true
                              hidden: false
                              type: string
                          - variable: password
                            label: "password"
                            schema:
                              default: ""
                              editable: true
                              hidden: false
                              type: string
                    - variable: ssh
                      label: "git using SSH"
                      schema:
                        type: dict
                        required: false
                        attrs:
                          - variable: key
                            label: "SSH key"
                            schema:
                              default: ""
                              editable: true
                              hidden: false
                              type: string
